/*!
 * linqjs v0.0.0
 * (c) Sven Schmidt 
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
"use strict";function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}!function(){var a=this||(0,eval)("this");!function(b){try{"function"==typeof define&&define.amd?define(["require","exports"],b):exports&&module&&module.exports&&b(exports||module.exports)}catch(c){b(a.linqjs={})}}(function(a){function b(a,b){if(!a)throw new Error(b)}function c(a){b(g(a),"Parameter must be function!")}function d(a){b(f(a),"Parameter must be array!")}function e(a){b(f(a)),b(!i(a),"Sequence is empty")}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(a){return"function"==typeof a}function h(a){return!isNaN(parseFloat(a))}function i(a){return d(a),0===a.length}function j(a,b){if(a=Object(a),Object.hasOwnProperty("assign")&&"function"==typeof Object.assign)Object.assign(a,b);else for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a}function k(b){j(a,b)}function l(a){var d=arguments.length<=1||void 0===arguments[1]?function(a,b){return!0}:arguments[1],e=arguments.length<=2||void 0===arguments[2]?1/0:arguments[2];b(f(a),"arr must be array!"),c(d),b(h(e),"stopAfter must be numeric!");for(var g=[],i=a.length,j=0;j<i&&!(d(a[j],j)&&(g.push(a[j]),g.length>=e));j++);return g}function m(a){var d=arguments.length<=1||void 0===arguments[1]?function(a,b){return a===b}:arguments[1];b(f(a),"arr must be array!"),c(d);var e=[],g=a.length;a:for(var h=0;h<g;h++){for(var i=a[h],j=0;j<e.length;j++)if(d(i,e[j]))continue a;e.push(i)}return e}function n(a){return/native code/.test(Object(a).toString())||!!~U.indexOf(a)}function o(){var a=arguments.length<=0||void 0===arguments[0]?Object:arguments[0];if(a&&n(a)&&"function"==typeof a){var b=a();return b instanceof Object||a===Date?null:b}return null}function p(){j(Array.prototype,a)}function q(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return a}:arguments[0];return c(a),e(this),Math.min.apply(null,this.map(a))}function r(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return a}:arguments[0];return c(a),e(this),Math.max.apply(null,this.map(a))}function s(){return e(this),this.reduce(function(a,b){return a+b})}function t(){return e(this),s.call(this)/this.length}function u(a){return b(f(a),"second must be an array!"),Array.prototype.concat.apply(this,a)}function v(a){var b=arguments.length<=1||void 0===arguments[1]?function(a,b){return a===b}:arguments[1];return m(this.Concat(a),b)}function w(){var a=arguments.length<=0||void 0===arguments[0]?function(a,b){return!0}:arguments[0];return c(a),l(this,a)}function x(a){return!!~this.indexOf(a)}function y(a){return b(a<this.length&&a>=0,"Array index is out of bounds!"),b(h(a),"Index must be numeric!"),this[a]}function z(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return b(h(a),"First parameter must be numeric!"),a<=0?[]:this.slice(0,a)}function A(a,b){d(a);for(var c=a.length,e=0;e<c;e++)if(!b(a[e],e))return e;return a.length-1}function B(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return b(h(a),"First parameter must be numeric!"),a<=0?this:this.slice(a,this.length)}function C(){var a=arguments.length<=0||void 0===arguments[0]?function(a,b){return!0}:arguments[0];return c(a),this.Take(A(this,a))}function D(){var a=arguments.length<=0||void 0===arguments[0]?function(a,b){return!0}:arguments[0];return c(a),this.Skip(A(this,a))}function E(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0];c(a),e(this);var b=l(this,a,1);return b[0]?b[0]:null}function F(a,e){var f=arguments.length<=2||void 0===arguments[2]?function(a){return!0}:arguments[2],g=arguments.length<=3||void 0===arguments[3]?Object:arguments[3];d(a);var h=void 0;if(n(f)?(h=function(a){return!0},g=f):h=f,c(h),b(n(g),"constructor must be native constructor, e.g. Number!"),!i(a)){var j=e.call(a,h);if(j)return j}return o(g)}function G(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0],b=arguments.length<=1||void 0===arguments[1]?Object:arguments[1];return F(this,E,a,b)}function H(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0];return c(a),e(this),this.reverse().First(a)}function I(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0],b=arguments.length<=1||void 0===arguments[1]?Object:arguments[1];return F(this,H,a,b)}function J(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0];c(a),e(this);var b=l(this,a);if(1===b.length)return b[0];throw new Error("Sequence contains more than one element")}function K(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0],b=arguments.length<=1||void 0===arguments[1]?Object:arguments[1];return F(this,J,a,b)}function L(a){return[].concat(_toConsumableArray(a))}function M(){return this.OrderBy(V)}function N(){return this.sort(V)}function O(a){c(a);var b=new W(this,a);return L(b)}function P(){return this.OrderByDescending(V)}function Q(a){c(a);var b=new X(this,a);return L(b)}function R(a,b){return a=Math.ceil(a),b=Math.floor(b),Math.floor(Math.random()*(b-a))+a}function S(){return(new Date).getTime()}function T(){for(var a=0,b=0,c=0,d=1;d<=100;d++){for(var e=[],f=R(10,1e3*d),g=R(1,10),h=0;h<f;h++)e.push(R(-1e6,1e6));var i=e,j=e.slice(0);console.log("Test #"+d+" with "+f+" random elements, taking the first "+g+":");var k=S(),l=i.sort(V).slice(0,g),m=S(),n=m-k;console.log(" -> Array.sort() finished after "+n+" milliseconds");for(var o=S(),p=new W(j,V),q=p[Symbol.iterator](),r=[],s=0;s<g;s++)r.push(q.next().value);var t=S(),u=t-o;u>n?console.warn(" -> Heap finished after "+u+" milliseconds and took "+(u-n)+" milliseconds longer"):console.log(" -> Heap finished after "+u+" milliseconds");for(var v=!0,w=0;w<f;w++)if(l[w]!==r[w]){v=!1;break}v?console.log(" -> Finished successfully."):console.error(" -> Finished with different results!",l,r),n<u?a++:u<n?b++:c++}var x=a+b+c;console.log("Array.sort() was faster: "+a+"/"+x),console.log("Heap         was faster: "+b+"/"+x),console.log("Both where equally fast: "+c+"/"+x)}var U=[Object,Number,Boolean,String,Symbol],V=function(a,b){return a<b?-1:b<a?1:0},W=function(){function a(a){var b=arguments.length<=1||void 0===arguments[1]?V:arguments[1];d(a),c(b),this.comparator=b,this.elements=a,e(this.elements,this.comparator)}function b(a,c,d){var e=2*(d+1),f=e-1,g=d;if(f<a.length&&c(a[f],a[g])<0&&(g=f),e<a.length&&c(a[e],a[g])<0&&(g=e),g!==d){var h=a[d];a[d]=a[g],a[g]=h,b(a,c,g)}}function e(a,c){for(var d=Math.floor(a.length/2);d>=0;d--)b(a,c,d)}return a.prototype.hasTopElement=function(){return this.elements.length>0},a.prototype.getTopElement=function(){if(1==this.elements.length)return this.elements.pop();var a=this.elements[0],c=this.elements.pop();return this.elements[0]=c,b(this.elements,this.comparator,0),a},a.prototype[Symbol.iterator]=function(){var a=this;return{next:function(){return a.hasTopElement()?{done:!1,value:a.getTopElement()}:{done:!0}}}},a}(),X=function(){function a(a){var b=arguments.length<=1||void 0===arguments[1]?V:arguments[1];d(a),c(b),W.apply(this,[a,function(a,c){return-1*b(a,c)}])}return a.prototype=Object.create(W.prototype),a.prototype.constructor=a,a}();k({install:p,Min:q,Max:r,Average:t,Sum:s,Concat:u,Union:v,Where:w,ElementAt:y,Take:z,TakeWhile:C,Skip:B,SkipWhile:D,Contains:x,First:E,FirstOrDefault:G,Last:H,LastOrDefault:I,Single:J,SingleOrDefault:K,Order:M,OrderCompare:N,OrderBy:O,OrderDescending:P,OrderByDescending:Q,HeapSpeedTest:T})})}();