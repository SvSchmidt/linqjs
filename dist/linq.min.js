/*!
 * linqjs v0.0.0
 * (c) Sven Schmidt 
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
"use strict";function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}!function(){var a=this||(0,eval)("this");!function(b){try{"function"==typeof define&&define.amd?define(["require","exports"],b):exports&&module&&module.exports&&b(exports||module.exports)}catch(c){b(a.linqjs={})}}(function(a){function b(a,b){if(a=Object(a),Object.hasOwnProperty("assign")&&"function"==typeof Object.assign)Object.assign(a,b);else for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a}function c(c){b(a,c)}function d(a,b){if(!a)throw new Error(b)}function e(a){d(i(a),"Parameter must be function!")}function f(a){d(h(a),"Parameter must be array!")}function g(a){d(h(a)),d(!k(a),"Sequence is empty")}function h(a){return"[object Array]"===Object.prototype.toString.call(a)}function i(a){return"function"==typeof a}function j(a){return!isNaN(parseFloat(a))}function k(a){return f(a),0===a.length}function l(a){var b=arguments.length<=1||void 0===arguments[1]?function(a,b){return!0}:arguments[1],c=arguments.length<=2||void 0===arguments[2]?1/0:arguments[2];d(h(a),"arr must be array!"),e(b),d(j(c),"stopAfter must be numeric!");for(var f=[],g=a.length,i=0;i<g&&!(b(a[i],i)&&(f.push(a[i]),f.length>=c));i++);return f}function m(a){var b=arguments.length<=1||void 0===arguments[1]?function(a,b){return a===b}:arguments[1];d(h(a),"arr must be array!"),e(b);var c=[],f=a.length;a:for(var g=0;g<f;g++){for(var i=a[g],j=0;j<c.length;j++)if(b(i,c[j]))continue a;c.push(i)}return c}function n(a){return/native code/.test(Object(a).toString())||!!~N.indexOf(a)}function o(){var a=arguments.length<=0||void 0===arguments[0]?Object:arguments[0];if(a&&n(a)&&"function"==typeof a){var b=a();return b instanceof Object||a===Date?null:b}return null}function p(){b(Array.prototype,a)}function q(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return a}:arguments[0];return e(a),Math.min.apply(null,this.map(a))}function r(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return a}:arguments[0];return e(a),Math.max.apply(null,this.map(a))}function s(){var a=this.reduce(function(a,b){return a+b});return a/this.length}function t(a){return d(h(a),"second must be an array!"),Array.prototype.concat.apply(this,a)}function u(a){var b=arguments.length<=1||void 0===arguments[1]?function(a,b){return a===b}:arguments[1];return m(this.Concat(a),b)}function v(){var a=arguments.length<=0||void 0===arguments[0]?function(a,b){return!0}:arguments[0];return e(a),l(this,a)}function w(a){return!!~this.indexOf(a)}function x(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0];e(a),g(this);var b=l(this,a,1);return b[0]?b[0]:null}function y(a,b){var c=arguments.length<=2||void 0===arguments[2]?function(a){return!0}:arguments[2],g=arguments.length<=3||void 0===arguments[3]?Object:arguments[3];f(a);var h=void 0;if(n(c)?(h=function(a){return!0},g=c):h=c,e(h),d(n(g),"constructor must be native constructor, e.g. Number!"),!k(a)){var i=b.call(a,h);if(i)return i}return o(g)}function z(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0],b=arguments.length<=1||void 0===arguments[1]?Object:arguments[1];return y(this,x,a,b)}function A(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0];return e(a),g(this),this.reverse().First(a)}function B(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0],b=arguments.length<=1||void 0===arguments[1]?Object:arguments[1];return y(this.reverse(),A,a,b)}function C(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0];e(a),g(this);var b=l(this,a);if(1===b.length)return b[0];throw new Error("Sequence contains more than one element")}function D(){var a=arguments.length<=0||void 0===arguments[0]?function(a){return!0}:arguments[0],b=arguments.length<=1||void 0===arguments[1]?Object:arguments[1];return y(this,C,a,b)}function E(a){return[].concat(_toConsumableArray(a))}function F(){return this.OrderBy(O)}function G(){return this.sort(O)}function H(a){e(a);var b=new P(this,a);return E(b)}function I(){return this.OrderByDescending(O)}function J(a){e(a);var b=new Q(this,a);return E(b)}function K(a,b){return a=Math.ceil(a),b=Math.floor(b),Math.floor(Math.random()*(b-a))+a}function L(){return(new Date).getTime()}function M(){for(var a=0,b=0,c=0,d=1;d<=100;d++){for(var e=[],f=K(10,1e3*d),g=K(1,10),h=0;h<f;h++)e.push(K(-1e6,1e6));var i=e,j=e.slice(0);console.log("Test #"+d+" with "+f+" random elements, taking the first "+g+":");var k=L(),l=i.sort(O).slice(0,g),m=L(),n=m-k;console.log(" -> Array.sort() finished after "+n+" milliseconds");for(var o=L(),p=new P(j,O),q=p[Symbol.iterator](),r=[],s=0;s<g;s++)r.push(q.next().value);var t=L(),u=t-o;u>n?console.warn(" -> Heap finished after "+u+" milliseconds and took "+(u-n)+" milliseconds longer"):console.log(" -> Heap finished after "+u+" milliseconds");for(var v=!0,w=0;w<f;w++)if(l[w]!==r[w]){v=!1;break}v?console.log(" -> Finished successfully."):console.error(" -> Finished with different results!",l,r),n<u?a++:u<n?b++:c++}var x=a+b+c;console.log("Array.sort() was faster: "+a+"/"+x),console.log("Heap         was faster: "+b+"/"+x),console.log("Both where equally fast: "+c+"/"+x)}var N=[Object,Number,Boolean,String,Symbol],O=function(a,b){return a<b?-1:b<a?1:0},P=function(){function a(a){var b=arguments.length<=1||void 0===arguments[1]?O:arguments[1];f(a),e(b),this.comparator=b,this.elements=a,c(this.elements,this.comparator)}function b(a,c,d){var e=2*(d+1),f=e-1,g=d;if(f<a.length&&c(a[f],a[g])<0&&(g=f),e<a.length&&c(a[e],a[g])<0&&(g=e),g!==d){var h=a[d];a[d]=a[g],a[g]=h,b(a,c,g)}}function c(a,c){for(var d=Math.floor(a.length/2);d>=0;d--)b(a,c,d)}return a.prototype.hasTopElement=function(){return this.elements.length>0},a.prototype.getTopElement=function(){if(1==this.elements.length)return this.elements.pop();var a=this.elements[0],c=this.elements.pop();return this.elements[0]=c,b(this.elements,this.comparator,0),a},a.prototype[Symbol.iterator]=function(){var a=this;return{next:function(){return a.hasTopElement()?{done:!1,value:a.getTopElement()}:{done:!0}}}},a}(),Q=function(){function a(a){var b=arguments.length<=1||void 0===arguments[1]?O:arguments[1];f(a),e(b),P.apply(this,[a,function(a,c){return-1*b(a,c)}])}return a.prototype=Object.create(P.prototype),a.prototype.constructor=a,a}();c({install:p,Min:q,Max:r,Average:s,Concat:t,Union:u,Where:v,Contains:w,First:x,FirstOrDefault:z,Last:A,LastOrDefault:B,Single:C,SingleOrDefault:D,Order:F,OrderCompare:G,OrderBy:H,OrderDescending:I,OrderByDescending:J,HeapSpeedTest:M})})}();